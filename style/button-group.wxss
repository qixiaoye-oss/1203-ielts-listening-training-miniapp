/**
 * 按钮组样式库 (Button Group Styles)
 * @version 1.7.1
 * @date 2025-12-07
 * @description 微信小程序通用按钮组 CSS 样式工具类库，包含固定底部容器、多种布局模式和蒙版功能
 * @author 开发团队
 * @note 这是一个纯 CSS 样式库，不是微信小程序自定义组件。通过 @import 引入后直接使用类名即可。
 *
 * @构建流程
 *   Step 1: 选择基础类 - .btn-action(文字+图标) 或 .btn-action-icon(纯图标)
 *   Step 2: 指定颜色 - 添加 data-icon="xxx" 属性，自动映射颜色
 *   Step 3: 可选布局 - 使用按钮组容器(.btn-page-bottom等)或单独使用
 *
 * @changelog
 *   v1.7.1 (2025-12-07) - 清理废弃代码，移除.btn--xxx类和组件type属性
 *   v1.7.0 (2025-12-07) - 实现icon颜色映射机制，全局迁移为data-icon方式
 *   v1.6.1 (2025-12-06) - 新增btn-pos-center通用居中类，__header/__footer仅提供基础布局
 *   v1.6.0 (2025-12-06) - 添加按钮位置类，预留icon颜色映射机制，重构构建流程
 *   v1.5.0 (2025-11-30) - 从 components/ 迁移至 style/，明确定位为样式工具类库
 *   v1.4.0 (2025-11-30) - 修正边框颜色为0.3，按钮改为15%透明度背景+主色文字
 *   v1.3.0 (2025-11-30) - 统一所有页面使用.btn-page-bottom容器类，消除外部依赖
 *   v1.2.0 (2025-11-29) - 添加蒙版A和蒙版B，确立固定底部为统一逻辑
 *   v1.1.0 (2025-11-29) - 统一按钮间距为15px
 *
 * @features
 *   - 纯 CSS 实现，无需 js/json/wxml 文件
 *   - data-icon 颜色自动映射（基于 images/v2/icon_color_mapping.json）
 *   - 固定底部按钮组容器（含蒙版A和蒙版B）
 *   - 双层结构布局（split）/ 单行居中布局（inline-center）
 *   - 基础按钮样式（文字+图标、纯图标）
 *   - 零外部依赖，开箱即用
 */

/* ==================== 配置变量 ==================== */
/* 使用者可在 app.wxss 或页面 wxss 中覆盖这些变量以自定义样式 */

page {
  /* 基础配置 */
  --button-group-border-width: 1px;
  --button-group-border-color: rgba(0, 0, 0, 0.3);  /* 边框颜色 */
  --button-group-border-radius: 9px;           /* 容器圆角 */
  --button-group-padding: 15px;                /* 容器内边距 */
  --button-group-gap: 15px;                    /* 按钮间距 */

  /* 按钮基础配置 */
  --button-font-size: 15px;                    /* 按钮文字大小 */
  --button-line-height: 15px;                  /* 按钮行高 */
  --button-padding: 5px;                       /* 按钮内边距 */
  --button-border-radius: 3px;                 /* 按钮圆角 */
  --button-icon-size: 25px;                    /* 图标尺寸 */
  --button-icon-margin: 5px;                   /* 图标与文字间距 */

  /* 固定底部容器配置 */
  --button-group-bottom-distance: 20px;        /* 距底部距离 */
  --button-group-left-distance: 20px;          /* 距左侧距离 */
  --button-group-right-distance: 20px;         /* 距右侧距离 */
  --button-group-z-index: 100;                 /* 层级 */

  /* 蒙版配置 */
  --button-group-mask-bg: #FFFFFF;             /* 蒙版背景色 */
  --button-group-mask-gradient-height: 15px;   /* 渐变蒙版高度 */

  /* 功能色彩（可根据项目主题色调整） */
  --button-color-audio: #00A6ED;               /* 音频播放 - 蓝色 */
  --button-color-correct: #00D26A;             /* 正确确认 - 绿色 */
  --button-color-wrong: #F92F60;               /* 错误删除 - 红色 */
  --button-color-list: #FFB02D;                /* 列表导航 - 黄色 */
  --button-color-setting: #998EA4;             /* 设置配置 - 紫灰 */
  --button-color-visible: #7D4533;             /* 显示隐藏 - 棕色 */
  --button-color-label: #F8312F;               /* 标记标签 - 红色 */
  --button-color-recording: #212121;           /* 录音相关 - 黑色 */
  --button-color-practice: #433B6B;            /* 练习模式 - 深紫 */
  --button-color-exercise: #533566;            /* 习题练习 - 紫色 */
  --button-color-disabled: #CCCCCC;            /* 禁用状态 - 灰色 */
}

/* ==================== 1. 基础按钮样式 ==================== */

/* 带文字和图标的按钮 */
.btn-action {
  font-size: var(--button-font-size);
  line-height: var(--button-line-height);
  border-radius: var(--button-border-radius);
  padding: var(--button-padding);
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-sizing: border-box;
}

.btn-action image {
  flex-shrink: 0;
  width: var(--button-icon-size);
  height: var(--button-icon-size);
  margin-left: var(--button-icon-margin);
}

/* 纯图标按钮 */
.btn-action-icon {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--button-border-radius);
  padding: var(--button-padding);
  position: relative;
  box-sizing: border-box;
}

.btn-action-icon image {
  flex-shrink: 0;
  width: var(--button-icon-size);
  height: var(--button-icon-size);
}

/* ==================== 2. 按钮组布局 - 双层结构 ==================== */

.btn-group-layout-split {
  border: var(--button-group-border-width) solid var(--button-group-border-color);
  border-radius: var(--button-group-border-radius);
  box-sizing: border-box;
}

/* 上层（Header）- 仅提供基础布局，具体排列由 btn-pos-* 位置类控制 */
.btn-group-layout-split__header {
  display: flex;
  flex-direction: row;
  gap: var(--button-group-gap);
  padding: var(--button-group-padding);
}

/* 分割线 */
.btn-group-layout-split__divider {
  width: 100%;
  height: var(--button-group-border-width);
  background: var(--button-group-border-color);
}

/* 下层（Footer） */
.btn-group-layout-split__footer {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  gap: var(--button-group-gap);
  padding: var(--button-group-padding);
}

/* ==================== 3. 按钮组布局 - 单行居中 ==================== */

.btn-group-layout-inline-center {
  border: var(--button-group-border-width) solid var(--button-group-border-color);
  border-radius: var(--button-group-border-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--button-group-gap);
  padding: var(--button-group-padding);
  box-sizing: border-box;
}

/* ==================== 4. 固定底部容器（含蒙版） ==================== */

/**
 * .btn-page-bottom 是一个完整的固定底部按钮组容器
 * 包含三个核心部分：
 * 1. 容器定位：固定在视窗底部
 * 2. 蒙版A（::before）：白色背景，覆盖到视窗底部
 * 3. 蒙版B（::after）：白色渐变，实现平滑过渡
 */
.btn-page-bottom {
  position: fixed;
  bottom: var(--button-group-bottom-distance);
  left: var(--button-group-left-distance);
  right: var(--button-group-right-distance);
  z-index: var(--button-group-z-index);
}

/**
 * 蒙版A：白色背景
 * 作用：从按钮组顶部向下覆盖到视窗底部，防止滚动内容透出
 */
.btn-page-bottom::before {
  content: '';
  position: absolute;
  top: 0;
  left: calc(-1 * var(--button-group-left-distance));
  right: calc(-1 * var(--button-group-right-distance));
  bottom: calc(-1 * var(--button-group-bottom-distance));
  background: var(--button-group-mask-bg);
  z-index: -1;
}

/**
 * 蒙版B：渐变过渡
 * 作用：从按钮组顶部向上渐变到透明，实现平滑视觉过渡
 */
.btn-page-bottom::after {
  content: '';
  position: absolute;
  bottom: 100%;
  left: calc(-1 * var(--button-group-left-distance));
  right: calc(-1 * var(--button-group-right-distance));
  height: var(--button-group-mask-gradient-height);
  background: linear-gradient(to top, var(--button-group-mask-bg), transparent);
  pointer-events: none;
}

/* ==================== 5. 禁用状态 ==================== */

/* 按钮禁用样式 */
.btn--dis {
  opacity: 0.3;
}

/* ==================== 6. 按钮位置类 ==================== */

/**
 * 按钮位置规范：
 * - 居中（任意按钮）：使用 btn-pos-center 类包裹，按钮间距15px，整体居中
 * - 左1/左2：靠左排列，距边缘15px
 * - 右1/右2：靠右排列，距边缘15px
 * - 按钮与按钮之间间距：15px
 */

/* 按钮居中容器：任意数量按钮居中对齐 */
.btn-pos-center {
  display: flex;
  justify-content: center;
  gap: var(--button-group-gap);
}

/* 双按钮居中（别名，向后兼容） */
.btn-pos-dual-center {
  display: flex;
  justify-content: center;
  gap: var(--button-group-gap);
}

/* 靠左第1个按钮 */
.btn-pos-left-1 {
  margin-right: auto;
}

/* 靠左第2个按钮（紧跟左1，间距15px由gap控制） */
.btn-pos-left-2 {
  /* 配合 left-1 使用，自动跟随 */
}

/* 靠右第1个按钮 */
.btn-pos-right-1 {
  margin-left: auto;
}

/* 靠右第2个按钮（紧跟右1，间距15px由gap控制） */
.btn-pos-right-2 {
  /* 配合 right-1 使用，自动跟随 */
}

/* 组合：左侧按钮组 + 右侧按钮组 */
.btn-pos-left-group {
  display: flex;
  gap: var(--button-group-gap);
  margin-right: auto;
}

.btn-pos-right-group {
  display: flex;
  gap: var(--button-group-gap);
  margin-left: auto;
}

/* ==================== 7. icon颜色映射 ==================== */

/**
 * icon → 颜色映射机制
 * 基于 images/v2/icon_color_mapping.json 配置
 * 使用 data-icon 属性指定 icon 名称，自动应用对应主色
 *
 * 使用示例：
 * <view class="btn-action" data-icon="save">
 *   <view>保存</view>
 *   <image src="/images/v2/save_bt.png"></image>
 * </view>
 *
 * <view class="btn-action-icon" data-icon="play">
 *   <image src="/images/v2/play_bt.png"></image>
 * </view>
 */

/* 蓝色系 #00A6ED */
[data-icon="save"],
[data-icon="play"],
[data-icon="pause"],
[data-icon="replay"],
[data-icon="restart"],
[data-icon="submit"],
[data-icon="next"],
[data-icon="goto"],
[data-icon="updown"] {
  color: #00A6ED;
  background-color: rgba(0, 166, 237, 0.15);
}

/* 绿色 #00D26A */
[data-icon="correct"] {
  color: #00D26A;
  background-color: rgba(0, 210, 106, 0.15);
}

/* 红色 #F8312F */
[data-icon="flag"] {
  color: #F8312F;
  background-color: rgba(248, 49, 47, 0.15);
}

/* 棕色 #7D4533 */
[data-icon="visible"],
[data-icon="hidden"] {
  color: #7D4533;
  background-color: rgba(125, 69, 51, 0.15);
}

/* 黄色 #FFB02E */
[data-icon="list"] {
  color: #FFB02E;
  background-color: rgba(255, 176, 46, 0.15);
}

/* 灰紫色 #998EA4 */
[data-icon="setting"] {
  color: #998EA4;
  background-color: rgba(153, 142, 164, 0.15);
}

/* 紫色 #533566 */
[data-icon="me"] {
  color: #533566;
  background-color: rgba(83, 53, 102, 0.15);
}

/* ==================== 8. 辅助类 ==================== */

/* 按钮角标（用于显示数字或状态） */
/* 角标对角线中点与按钮右上角重合，背景色需自定义 */
.btn-corner-mark {
  position: absolute;
  top: 0;
  right: 0;
  transform: translate(50%, -50%) scale(0.9);
  padding: 2px;
  font-size: 10px;
  border-radius: var(--button-border-radius);
  box-sizing: border-box;
  color: white;
  /* 背景色需通过额外类或内联样式指定 */
}

/* ==================== 9. 动画效果 ==================== */

/* 晃动动画 - 吸引用户注意力 */
.btn--shake {
  animation: btn-shake 0.6s ease-in-out;
}

@keyframes btn-shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-5px); }
  40% { transform: translateX(5px); }
  60% { transform: translateX(-3px); }
  80% { transform: translateX(3px); }
}

/* 点击动效 - 与组件配合使用 */
.tap-active {
  opacity: 0.7;
  transform: scale(0.98);
  transition: all 0.1s ease-out;
}

/* ==================== 10. 纯文字层样式 ==================== */

/**
 * 按钮组中的纯文字层（无按钮）
 * 规范：文字 15px，行距 1.4，居中，上下 padding 15px
 * 注意：__header/__footer 已有 padding: 15px，此类仅需处理文字样式和居中
 */
.btn-text-content {
  flex: 1;
  font-size: 15px;
  line-height: 1.4;
  text-align: center;
}
