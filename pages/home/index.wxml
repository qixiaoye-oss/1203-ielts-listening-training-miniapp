<view class="home">
  <!-- 页面加载进度条 -->
  <view class="loading-progress-bar" wx:if="{{loading}}">
    <view class="loading-progress-bar__inner" style="width: {{loadProgress}}%;"></view>
  </view>
  <view class="home-main-item" wx:if="{{popularScience.list.length > 0}}" style="background:{{popularScience.colorRgba}}">
    <view class="home-main-item__title" style="color:{{popularScience.colorRgb}}">{{popularScience.title}}</view>
    <view class="home-main-item__content--grid">
      <block wx:for="{{popularScience.list}}" wx:key="noticeIndex" wx:for-item="notice" wx:for-index="noticeIndex">
        <view class="home-card home-card--notice" style="background:{{popularScience.colorRgba}};border-color:{{popularScience.colorRgb}};" bind:tap="toNoticePage" data-id="{{notice.id}}" hover-class="tap-active" hover-stay-time="100">
          <view class="home-card__content">
            <view class="home-card__category" style="color: {{popularScience.colorRgb}};">{{notice.groupTitle}}</view>
            <view class="home-card__body">
              <text class="home-card__body-title">{{notice.title}}</text>
              <text class="home-card__body-separator"> · </text>
              <text class="home-card__body-desc">{{notice.description || '雅思听力备考技巧与策略分享，帮助你更高效地提升听力水平'}}</text>
            </view>
            <view class="home-card__meta">
              <image src="/images/helpful.png"></image>
              <view>{{notice.helpfulCount}}人觉得有用</view>
            </view>
          </view>
        </view>
      </block>
    </view>
    <view class="home-view-all">
      <view class="home-view-all__button" style="background: {{popularScience.colorRgba}};" bind:tap="toNoticeListPage" hover-class="tap-active" hover-stay-time="100">
        <view style="color: {{popularScience.colorRgb}};">查看所有</view>
        <image src="/images/v2/next_bt.png"></image>
      </view>
    </view>
  </view>
  <block wx:for="{{list}}" wx:key="groupIndex" wx:for-item="group" wx:for-index="groupIndex" wx:if="{{group.list.length > 0}}">
    <view class="home-main-item" style="background:{{group.colorRgba}}">
      <view class="home-main-item__title" style="color:{{group.colorRgb}}">{{group.title}}</view>
      <view class="home-main-item__notice" wx:if="{{group.notice}}" style="background: {{group.notice.colorRgba}};" bind:tap="onNoticeTap" hover-class="tap-active" hover-stay-time="100">
        <image class="home-main-item__notice-img" src="{{group.notice.iconUrl}}"></image>
        <view class="home-main-item__notice-text" style="color: {{group.notice.colorRgb}};">{{group.notice.title}}</view>
      </view>
      <view wx:if="{{group.dataType === 'SUBJECT'}}" class="{{group.layoutMode === 'QUAD_GRID' ? 'home-main-item__content--grid' : 'home-main-item__content'}}">
        <block wx:for="{{group.list}}" wx:key="subjectIndex" wx:for-item="subject" wx:for-index="subjectIndex">
          <view class="home-card home-card--subject" style="background:{{group.colorRgba}};border-color:{{group.colorRgb}};" bind:tap="toChildPage" data-id="{{subject.id}}" data-type="{{subject.dataType}}" hover-class="tap-active" hover-stay-time="100">
            <view class="home-card__content">
              <view class="home-card__header">
                <image class="home-card__icon" wx:if="{{subject.iconUrl}}" src="{{subject.iconUrl}}" />
                <view class="home-card__title">{{subject.title}}</view>
              </view>
              <view class="home-card__footer">
                <view class="tag tag--transparent" style="color:{{group.colorRgb}};border-color:{{group.colorRgb}}">共{{subject.subItemCount}}{{subject.subItemCategory}}</view>
                <view class="tag tag--orange" style="background:{{group.color}}" wx:if="{{subject.category}}">{{subject.category}}</view>
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>
  </block>
</view>